Ferguson school district violated voting rights act, judge rules