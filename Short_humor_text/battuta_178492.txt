Rocks thrown at police after killing allegedly armed man