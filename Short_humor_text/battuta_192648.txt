Amid protests, greece passes painful reforms to attain fiscal targets