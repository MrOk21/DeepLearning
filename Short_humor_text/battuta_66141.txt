Apple relies on software, subscription services as iphone sales dip