Judge who asked ‘why couldn’t you keep knees together?’ resigns