Man shot after opening fire on officers in ferguson, police say